{% import "bootstrap/wtf.html" as wtf %}
{% extends "layout.html" %}

{% block content %}
<div class="container mt-4">
    <form id=myform method="post" name="ranking_form">
        {{ ranking_form.csrf_token }}
        Team Title: {{ ranking_form.title }}<br>
        <div>
            <table class="table">
                <tr>
                    <th> item name </th>
                    <th> place </th>
                    <th> price </th>
                    <th> item image url</th>
                    <th> item image </th>
                    <th> delete </th>
                </tr>
                {% for item in ranking_form.items %}
                <tr>
                    <td>{{ wtf.form_field(item.item_name) }}</td>
                    <td>{{ wtf.form_field(item.place) }}</td>
                    <td>{{ wtf.form_field(item.price) }}</td>
                    <td>{{ wtf.form_field(item.item_image, class="item_image_url") }}</td>
                    <td><img class="item_image img-thumbnail" src="{{ item.item_image.data }}" alt="" border=3 height=50 width=50></img></td>
                    <td><button class="rowdel btn-danger">Del</button></td>
                </tr>
                {% endfor %}
            </table>
        </div>

        <p>{{ wtf.form_field(ranking_form.addline, class="btn-primary") }}</p>
        <p>{{ wtf.form_field(ranking_form.submitform, class="btn-success") }}</p>




    </form>
    
</div>

<style>
    .control-label {
        display: none;
    }

    .help-block {
        display: none;
    }
</style>

<script>
    $('.item_image_url').change(function(){
        console.log("caaled")
        var item_image_url = $(this).closest('tr').find('.item_image_url').val();
        console.log(item_image_url)
        $(this).closest('tr').find('.item_image').attr('src', item_image_url)
    });


    $('.rowdel').click(function() {
            let row = $(this).closest("tr").remove();
        $(row).remove();
    });

    $(function(){
        $('input').keypress(function(e){
            if(e.which == 13) {
                return false;
            }
        });
    });
</script>
{% endblock %}
